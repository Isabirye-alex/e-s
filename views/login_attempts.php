<div class="card customized-card">
    <div class="card-header">
        <div class="d-flex justify-content-between align-items-center">
            <h3 class="card-title">All Login Attempts</h3>
            <div class="card-tools">
            </div>
        </div>
    </div>
    <div class="card-body p-4">
        <div class="col-lg-12">
<div class="row d-flex justify-content-between align-items-center">
    <!-- Left side buttons -->
    <div id="toolbar" class="mb-4 pb-3 col-lg-6 d-flex">
        <a href="#" class="btn btn-outline-success btn-flat btn-sm deleteattempt me-2"><i class="fa fa-eye-slash me-2"></i>Hide Login</a>
        <a href="#" class="btn btn-outline-danger btn-flat btn-sm deleteall"><i class="fa fa-trash me-2"></i>Hide All Login Attempts</a>
    </div>

    <!-- Right side buttons -->
    <div id="customButtonsContainer" class="mb-4 pb-3 col-lg-6 d-flex justify-content-end">
    <div class="dt-buttons btn-group flex-wrap">          <button class="btn btn-secondary buttons-copy buttons-html5 btn-flat btn-sm" tabindex="0" aria-controls="logintable" type="button"><span><i class="fa fa-copy"></i> Copy</span></button> <button class="btn btn-secondary buttons-csv buttons-html5 btn-success btn-flat btn-sm" tabindex="0" aria-controls="logintable" type="button"><span><i class="fa fa-file-csv"></i> CSV</span></button> <button class="btn btn-secondary buttons-excel buttons-html5 btn-success btn-flat btn-sm" tabindex="0" aria-controls="logintable" type="button"><span><i class="fa fa-file-excel"></i> Excel</span></button> <button class="btn btn-secondary buttons-pdf buttons-html5 btn-danger btn-flat btn-sm" tabindex="0" aria-controls="logintable" type="button"><span><i class="fa fa-file-pdf"></i> PDF</span></button> <button class="btn btn-secondary buttons-print btn-info" tabindex="0" aria-controls="logintable" type="button"><span><i class="fa fa-print"></i> Print</span></button> </div></div>
        </div>
        <div class="table-responsive customized-table-container">
            <div id="logintable_wrapper" class="dataTables_wrapper no-footer"><div class="dataTables_length" id="logintable_length"><label>Show <select name="logintable_length" aria-controls="logintable" class=""><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="250">250</option><option value="500">500</option></select> entries</label></div><div id="logintable_filter" class="dataTables_filter"><label>Search:<input type="search" class="" placeholder="" aria-controls="logintable"></label></div><div id="logintable_processing" class="dataTables_processing" role="status" style="display: none;"><div><div></div><div></div><div></div><div></div></div></div><table id="logintable" class="table display nowrap table-stripped customized-table dataTable no-footer" aria-describedby="logintable_info">
                <thead>
                    <tr><th class="sorting" tabindex="0" aria-controls="logintable" rowspan="1" colspan="1" style="width: 200px;" aria-label="Username: activate to sort column ascending">Username</th><th class="sorting" tabindex="0" aria-controls="logintable" rowspan="1" colspan="1" style="width: 150px;" aria-label="Password: activate to sort column ascending">Password</th><th class="sorting" tabindex="0" aria-controls="logintable" rowspan="1" colspan="1" style="width: 150px;" aria-label="Device: activate to sort column ascending">Device</th><th class="sorting" tabindex="0" aria-controls="logintable" rowspan="1" colspan="1" style="width: 75px;" aria-label="Status: activate to sort column ascending">Status</th><th class="sorting" tabindex="0" aria-controls="logintable" rowspan="1" colspan="1" style="width: 160px;" aria-label="Attempt Date: activate to sort column ascending">Attempt Date</th></tr>
                </thead><tbody><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-14 18:39:54</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-13 19:46:21</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-13 11:12:22</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-12 18:15:13</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-12 13:53:28</td></tr><tr class="even"><td>pearl</td><td>1***5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-12 13:53:22</td></tr><tr class="odd"><td>pearl</td><td>1***5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-12 13:52:06</td></tr><tr class="even"><td>cashier1</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-12 08:21:24</td></tr><tr class="odd"><td>cashier1</td><td>2**0</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-12 08:21:20</td></tr><tr class="even"><td>demo</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-12 08:21:09</td></tr><tr class="odd"><td>demo</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-12 08:20:53</td></tr><tr class="even"><td>admin</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-12 08:20:50</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-11 19:01:53</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-11 14:56:00</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-08 18:13:35</td></tr><tr class="even"><td>demo</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-07 18:43:43</td></tr><tr class="odd"><td>demo</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-07 18:43:38</td></tr><tr class="even"><td>pearl</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-07 18:43:31</td></tr><tr class="odd"><td>becky</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-07 18:43:21</td></tr><tr class="even"><td>becky</td><td>2**0</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-07 18:43:09</td></tr><tr class="odd"><td>cashier1</td><td>2**0</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-07 18:43:02</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-06 12:46:59</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-05 13:49:37</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-04 17:20:12</td></tr><tr class="odd"><td>FARIDA</td><td>2**4</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-04 13:12:36</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-04 11:40:08</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-04 11:40:08</td></tr><tr class="even"><td>Pro</td><td>P*****0</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-03 19:53:59</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-03 19:34:18</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-08-03 18:26:12</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Android Phone</td><td><span class="badge bg-success">Success</span></td><td>2025-08-01 14:00:19</td></tr><tr class="even"><td>pearl</td><td>P********5</td><td>Android Phone</td><td><span class="badge bg-danger">Failed</span></td><td>2025-08-01 14:00:12</td></tr><tr class="odd"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-07-31 11:49:14</td></tr><tr class="even"><td>pearl</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-31 11:49:10</td></tr><tr class="odd"><td></td><td></td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-30 21:33:49</td></tr><tr class="even"><td></td><td></td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-30 21:09:43</td></tr><tr class="odd"><td></td><td></td><td>Mac Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-30 20:59:54</td></tr><tr class="even"><td></td><td></td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-30 20:36:39</td></tr><tr class="odd"><td></td><td></td><td>Linux Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-30 20:11:17</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-07-30 19:18:04</td></tr><tr class="odd"><td>pearl</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-30 19:17:53</td></tr><tr class="even"><td></td><td></td><td>Linux Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-30 01:24:09</td></tr><tr class="odd"><td></td><td></td><td>Linux Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-30 01:24:04</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-07-29 12:05:08</td></tr><tr class="odd"><td>pearl</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-29 12:05:05</td></tr><tr class="even"><td>pearl</td><td>1**4</td><td>Windows Computer</td><td><span class="badge bg-success">Success</span></td><td>2025-07-28 16:00:26</td></tr><tr class="odd"><td>pearl</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-28 16:00:18</td></tr><tr class="even"><td>pearl</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-23 13:16:32</td></tr><tr class="odd"><td>pearl</td><td>P********5</td><td>Windows Computer</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-22 11:35:36</td></tr><tr class="even"><td>Pearl</td><td>p********5</td><td>Android Phone</td><td><span class="badge bg-danger">Failed</span></td><td>2025-07-21 23:41:39</td></tr></tbody>
            </table><div class="dataTables_info" id="logintable_info" role="status" aria-live="polite">Showing 1 to 50 of 113 entries</div><div class="dataTables_paginate paging_simple_numbers" id="logintable_paginate"><a class="paginate_button previous disabled" aria-controls="logintable" aria-disabled="true" role="link" data-dt-idx="previous" tabindex="-1" id="logintable_previous">Previous</a><span><a class="paginate_button current" aria-controls="logintable" role="link" aria-current="page" data-dt-idx="0" tabindex="0">1</a><a class="paginate_button " aria-controls="logintable" role="link" data-dt-idx="1" tabindex="0">2</a><a class="paginate_button " aria-controls="logintable" role="link" data-dt-idx="2" tabindex="0">3</a></span><a class="paginate_button next" aria-controls="logintable" role="link" data-dt-idx="next" tabindex="0" id="logintable_next">Next</a></div></div>
        </div>
    </div>
</div>

<script>
let table = null;
let selectedattempt = null;
// const helperobj = new HelperClass();
$(async () => {
    loadDataLabel();
});
const loadDataLabel = () => {
  table = $("#logintable").DataTable({
    responsive: true,
    processing: true,
    paging: true,
    order: [],
    pageLength: 50,
    autoWidth: false,
    lengthMenu: [ [10, 25, 50, 100, 250, 500], [10, 25, 50, 100, 250, 500] ],
    dom: 'lBfrtip',
buttons: [
  {
    extend: 'copy',
    text: '<i class="fa fa-copy"></i> Copy',
    className: 'btn btn-secondary btn-flat btn-sm',
    exportOptions: { columns: ':not(:last-child)' }
  },
  {
    extend: 'csv',
    text: '<i class="fa fa-file-csv"></i> CSV',
    className: 'btn btn-success btn-flat btn-sm',
    exportOptions: { columns: ':not(:last-child)' }
  },
  {
    extend: 'excel',
    text: '<i class="fa fa-file-excel"></i> Excel',
    className: 'btn btn-success btn-flat btn-sm',
    exportOptions: { columns: ':not(:last-child)' }
  },
  {
    extend: 'pdf',
    text: '<i class="fa fa-file-pdf"></i> PDF',
    className: 'btn btn-danger btn-flat btn-sm',
    exportOptions: { columns: ':not(:last-child)' }
  },
  {
    extend: 'print',
    text: '<i class="fa fa-print"></i> Print',
    className: 'btn btn-info',
    exportOptions: { columns: ':not(:last-child)' }
  }
]
,
    initComplete: function() {
    // Move buttons to custom container
    var btns = $('.dt-buttons').detach();
    $('#customButtonsContainer').append(btns);
  },
    ajax: {
      url:_base_url_+"classes/Systemconfigs.php?f=view_login_attempts",
      dataSrc: "",
    },
    columns: [
    { data: "username", width: "200px" },
    { data: "password", width: "150px" },
    { data: "device", width: "150px" },
    {
      data: "status",
      width: "75px",
      render: function(data, type, row) {
        if (data == 1) {
          return '<span class="badge bg-success">Success</span>';
        } else {
          return '<span class="badge bg-danger">Failed</span>';
        }
      }
  },

    { data: "date_time", width: "160px" }
  ],
  });

    $("#logintable tbody").on("click", "tr", function () {
    if ($(this).hasClass("selected")) {
      $(this).removeClass("selected");
    } else {
      table.$("tr.selected").removeClass("selected");
      $(this).addClass("selected");
      var selectedIndex = table.row(".selected",{selected:true}).index();
      var selectedRow = table.row(selectedIndex).data();
      selectedattempt = selectedRow.id;
    }
  });
}

	$(document).ready(function(){
		$('.deleteattempt').click(function(){
        if(selectedattempt == null){
    toastr.error("Please select a login attempt to delete");
    return;
  }
			_conf("Are you sure to hide this login attempt","delete_attempt");
		})

    $('.deleteall').click(function(){
			_conf("Are you sure to hide all login attempts","delete_all");
		})

		$('.table').dataTable();
	})

function delete_attempt() {
  toastr.clear();
  $.post(_base_url_ + 'classes/Systemconfigs.php?f=deleteattempt', { id: selectedattempt }, 
  function(data){
    var resp = JSON.parse(data);
    if(resp.status == 'success'){
    table.ajax.reload();
    selectedattempt = null;
    $('#confirm_modal').modal('hide');
      toastr.success(resp.msg);
    }else{
      toastr.error(resp.msg);

    }
  }
);
}

function delete_all() {
  toastr.clear();
  $.post(_base_url_ + 'classes/Systemconfigs.php?f=deleteattempt', { id: 0 }, 
  function(data){
    var resp = JSON.parse(data);
    if(resp.status == 'success'){
    table.ajax.reload();
    selectedattempt = null;
    $('#confirm_modal').modal('hide');
      toastr.success(resp.msg);
    }else{
      toastr.error(resp.msg);

    }
  }
);
}

</script>      </div>